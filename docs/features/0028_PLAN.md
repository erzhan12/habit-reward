# Feature 0028: Make implicit “no reward” probability configurable

## Goal

Keep the current implicit “no reward” option in `RewardService.select_reward(...)`, but allow tuning its probability via a single configuration value.

## Requirement

- Default behavior stays the same: “no reward” is ~50% when all rewards are eligible.
- If configured to `50`, “no reward” gets weight equal to the sum of all reward weights.
- Probability should be configurable as a percentage.

## Proposed Configuration

- Add `NO_REWARD_PROBABILITY_PERCENT` (0–100) to environment/Django settings.
  - Default: `50.0`

## Selection Math (weight mapping)

Let:
- `S = sum(reward_weights)` for all eligible rewards
- `N = no_reward_weight`
- `p = NO_REWARD_PROBABILITY_PERCENT`

We want:
- `P(no_reward) = N / (S + N) = p / 100`

Solving for `N`:
- `N = S * p / (100 - p)`

Examples:
- `p = 50` → `N = 1.0 * S` (existing behavior)
- `p = 25` → `N = (1/3) * S`
- `p = 75` → `N = 3.0 * S`

Edge cases:
- `p <= 0` → exclude `None` from the population (never “no reward”)
- `p >= 100` → return `None` immediately (always “no reward”)

## Implementation Notes

- Update `src/services/reward_service.py` to compute `no_reward_weight` using the formula above.
- Add `NO_REWARD_PROBABILITY_PERCENT` to `src/habit_reward_project/settings.py` and `.env.example`.
- Update unit tests in `tests/test_reward_service.py` to cover:
  - `p=50` (backwards compatible)
  - `p=25` (weight formula)
  - `p=0` (no `None` in population)
  - `p=100` (always returns `None`)

